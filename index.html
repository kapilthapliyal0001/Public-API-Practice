<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>Hello, world!</title>
  </head>
  <body>
        <div class="text-center my-5">
            <h1 class="mb-3">Strive Books</h1>
            <button type="button" class="btn btn-info" onclick="loadData()">Load Books</button>
        </div>


        <!-- Place where we will add the user's data  -->

        <div class="container">
            <div class="row" id="add_here"></div>
            <!-- <ul class="list-group" id="myList"></ul> -->
        </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    -->
    <script>
        const loadData = () => {
            console.log("Click");

            fetch('https://striveschool-api.herokuapp.com/books')
            .then((response) => {
                console.log(response);
                 return response.json();
             } ).then((books) => {

                // extracting the books;
                // const pare = document.getElementsByClassName("container");
                // const row = document.createElement("div");
                // row.className = "row";
                // pare.appendChild(row);
                const row = document.getElementById("add_here");
                
                for(i = 0; i < books.length;i++) {
                    const book = books[i]   // naming the variable for each element instead of using books[i];

                    const img = document.createElement("img");
                    img.src = book.img;  // adding the source of the image from the array element books[i].img;

                    const col = document.createElement("div");  // creating the div element to append it to the row div in the end;
                    col.classList.add("col-12", "col-md-3");  // adding the class to the col div
                    img.classList.add("img-fluid")

                    col.appendChild(img); // adding the image to the col div;
                    row.appendChild(col);  // adding the col div to the row div;
                }
                console.log("We are waiting for the promises");
             })
            //  .catch(err => {
            //      document.getElementById("error").innerHTML = `There is some error`
            //  })


            // .then((users) => {

            //     // Extract the users from the response body.
            //     console.log(users);

            //     const list = document.getElementById("myList");
            //     for(i = 0; i < users.length;i++) {
            //         const listElement = document.createElement("li");
            //         listElement.className = "list-group-item";
            //         listElement.innerText = `${users[i].name}  ${users[i].email}`;
            //         list.appendChild(listElement);
            //     }
            // })
            

        }
    </script>
  </body>
</html>